<h1><%= t('.header', test_title: @test_passage.test.title) %></h1>

<div class="border rounded p-3">
  <%= progress(@test_passage) %>

  <%= content_tag :div, class: "progress",
                  data: { completed: @test_passage.amount_completed_questions,
                          amount: @test_passage.amount_questions } do %>
    <div class="progress-bar" role="progressbar" aria-valuenow="20"
         aria-valuemin="0" aria-valuemax="100" style="width:0%">
      0%
    </div>
  <% end %>

  <h2>
    <%= @test_passage.current_question.text %>
  </h2>


  <%= form_with url: test_passage_path(@test_passage), local: true, method: :put do |form| %>
  
    <%= form.collection_check_boxes :answer_ids, @test_passage.current_question.answers, :id, :text, include_hidden: false do |b| %>
      <p>
        <%= b.check_box id: "answer_ids_#{b.object.id}" %>
        <%= b.label %>
      </p>
    <% end %>
    <p><%= link_to 'Сохранить вопрос в Gist', gist_test_passage_path(@test_passage), method: :post %></p>
    <p><%= form.submit t('.next'),  class: "btn btn-outline-dark" %></p>
  <% end %>
</div>
